---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const writeups = await getCollection('writeups', ({ data }) => data.status === 'published');
	return writeups.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const formattedDate = new Intl.DateTimeFormat('en-US', {
	month: 'long',
	day: 'numeric',
	year: 'numeric',
}).format(entry.data.date);
---

<BaseLayout title={entry.data.title} description={entry.data.description}>
	<section class="hero">
		<div>
			<h1 class="hero__title">{entry.data.title}</h1>
			<p class="hero__subtitle">{entry.data.description}</p>
			<p class="card__meta">{formattedDate}</p>
		</div>
	</section>

	<article class="entry">
		<Content />
	</article>

	<style>
		.entry {
			background: rgba(6, 18, 13, 0.85);
			border-radius: 18px;
			padding: 28px;
			box-shadow: var(--shadow);
			border: 1px solid rgba(41, 255, 143, 0.12);
			line-height: 1.7;
			font-size: 1.02rem;
		}

		.entry h2,
		.entry h3 {
			font-family: 'Space Mono', 'IBM Plex Mono', monospace;
			margin-top: 1.8rem;
		}

		.entry a {
			color: var(--accent);
			text-decoration: underline;
			text-decoration-thickness: 2px;
			text-underline-offset: 3px;
		}

		.entry ul {
			padding-left: 1.3rem;
		}

		.entry code {
			background: rgba(41, 255, 143, 0.12);
			padding: 0.15rem 0.35rem;
			border-radius: 6px;
		}
	</style>
</BaseLayout>
